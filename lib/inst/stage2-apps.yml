---
#--------------------------------------------------------------
# Stage 2 Apps web server access control
#--------------------------------------------------------------
# Access control types:
#   null    grants access to anyone who can load the URL (e.g., local/remote modes)
#   oauth2  provides the most robust security via 3rd party login
#   keys    uses simple typed keys to add modest security to public URLs
#-------------------------------------------------------------
access_control: null

#--------------------------------------------------------------
# Named server file paths to which users _may_ be granted browsing access
#--------------------------------------------------------------
paths:
  Demo1: /path/to/demo1
  Demo2: /srv/data/demo2

#--------------------------------------------------------------
# Client information when access_control = oauth2
#--------------------------------------------------------------
# Recognized authentication hosts:
#   google  see https://developers.google.com/identity/protocols/oauth2
#   globus  see https://docs.globus.org/api/auth/ and https://developers.globus.org/
#-------------------------------------------------------------
oauth2:
  host: null
  client:
    key:    null # also called a client ID
    secret: null

#--------------------------------------------------------------
# Users granted access when access_control = oauth2
#--------------------------------------------------------------
#   - email addresses may include wildcards (*)
#   - the _first_ matching email is used, so put wildcards with restricted access last
#   - paths under 'paths: read' will be read-only for the user
#   - paths under 'paths: write' can additionally be written to (implies read)
#--------------------------------------------------------------
# Paths and apps may be entered as:
#   all, to give access to all named paths or all apps
#   null, to deny all access (i.e., to disable file browsing)
#   one, or an array, of path or app names
#--------------------------------------------------------------
# Optionally, 'paths' may contain named entries for:
#   load_default      name of the readable path to start with for loading files
#   bookmark_default  name of the writable path to start with for saving bookmarks
#--------------------------------------------------------------
user_groups:
  full_access:
    emails:
      - xxxxx@umich.edu # i.e., specific authorized user emails
      - xxxxx@umich.edu
    paths:
      read: all
      write: Demo2
    apps: all
  demo1:
    emails:
      - *@umich.edu # i.e., anyone authenticated to a Michigan email address
    paths:
      read: Demo1
      write: null
    apps: all
  public:
    emails: 
      - *@* # i.e., all authenticated email addresses
    paths: null
    apps:
      - demoApp

#--------------------------------------------------------------
# Named access keys recognized when access_control = keys
#--------------------------------------------------------------
#   hash  _encrypted_ version of the key that should be entered by a user
#         call mdi::password_store(key) to get the value to enter below
#--------------------------------------------------------------
# Paths and apps are entered similarly to users_groups, above
#--------------------------------------------------------------
keys:
  full_access:
    hash: 5fr9uc24m0eqjbgxp1wnva6hd8okiltz_df6e4823c701569a0a2adb899f041e9d
    paths: 
      read: all
      write: all
    apps: all
# etc., similar to above
